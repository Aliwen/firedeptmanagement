{%extends "base.html" %}
{% load bootstrap_toolkit %}
{% block content %}
<div>
	<form class="form-horizontal" style="margin-bottom: 30px" method="post">
		{% csrf_token %}
		{{arrest_payment_form|as_bootstrap}}
		<button type="submit" class="btn btn-primary" style="margin-left:400px">Insertar</button>
	</form>
</div>
{% endblock %}
{% block scripts%}
 	{{block.super}}
 	<script src="{{STATIC_URL}}js/libs/jquery.maskedinput-1.3.min.js"></script>
	<script type="text/javascript" >
		$(document).ready(function(){
			$("input#id_start_time_time").mask("9999");
			$("input#id_end_time_time").mask("9999");
			$("input#id_start_time_date").datepicker({"maxDate": 0});
			$("input#id_end_time_date").datepicker({"maxDate": 0});
			
			
			$("input[name$='payer_select']").autocomplete({
				source: function( request, response ) {
					var element = this.element;
					$.ajax({
						url: "/gestion/bomberos/autocompletar/",
						dataType: "json",
						data: {
							term: request.term
						},
						success: function( data ) {
							response( $.map( data, function( item ) {
								return {
									label: item.first_name +" "+item.last_name,
									value: item.first_name +" "+item.last_name,
									id: item.pk
								};
							}));
						}
					});
				},
				minLength: 1,
				select: function( event, ui ) {
						$("input[name$='payer']:hidden").val(ui.item.id);
						$(event.target).attr('readonly', 'readonly');
					}
			});
		});	
	</script>
{%endblock%}